<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Inscription au Grand Jeu Immersif</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="header">
    <img src="images/logo-myssea.png" alt="Logo Myssea" />
  </div>

  <h1>Inscription au Grand Jeu Immersif √† √âpinac</h1>

  <div id="telegram-warning">
    <strong>‚ö† IMPORTANT :</strong>
    <p>Vous devez avoir un <strong>pseudo Telegram</strong> et avoir contact√© notre bot.</p>
    <p>üì≤ <a href="https://telegram.org" target="_blank">T√©l√©chargez Telegram</a></p>
    <p>üîπ <a href="https://www.google.com/search?q=cr√©er+un+pseudo+Telegram" target="_blank">Cr√©er un pseudo Telegram</a></p>
  </div>

  <form id="registration-form">
    <label for="team-name">Nom de l'√©quipe :</label>
    <input type="text" id="team-name" required /><br><br>

    <label for="telegram-username">Nom d'utilisateur Telegram :</label>
    <input type="text" id="telegram-username" required placeholder="Ex: @monpseudo" /><br><br>
    <p style="color: red;"><strong>‚ö† Entrez correctement votre identifiant Telegram (ex: @votrePseudo)</strong></p>

    <label for="participants">Nombre de participants :</label>
    <input type="number" id="participants" min="1" max="5" required /><br><br>

    <label for="promo-code">Code promo (facultatif) :</label>
    <input type="text" id="promo-code" placeholder="Clique ici pour entrer un code" /><br><br>

    <p id="promo-warning" style="color: red; display: none;"></p>

    <div id="buttons"></div>
  </form>

  <script>
    const validPromoCodes = {
      "MYSSEPA1": 1,
      "MYSSEPA2": 2,
      "MYSSEPRO": 5,
      "MYSSEADMINITY": Infinity
    };

    const stripeLinks = {
      1: "https://buy.stripe.com/5kA6Gx6X8ZY6mQ004k",
      2: "https://buy.stripe.com/7e1sX5Eva42TgU06or",
      3: "https://buy.stripe.com/eVaaGxd6X0tshU002d",
      4: "https://buy.stripe.com/28og0Reb1b864eleUV",
      5: "https://buy.stripe.com/8wMOEfa5R00VbYc8wE"
    };

    document.getElementById("telegram-username").addEventListener("blur", function () {
      const input = this;
      if (!input.value.startsWith("@")) {
        input.value = "@" + input.value;
      }
    });

    document.getElementById("registration-form").addEventListener("input", function () {
      const team = document.getElementById("team-name").value.trim();
      const pseudo = document.getElementById("telegram-username").value.trim();
      const participants = parseInt(document.getElementById("participants").value) || 0;
      const code = document.getElementById("promo-code").value.trim().toUpperCase();
      const warning = document.getElementById("promo-warning");
      const btnZone = document.getElementById("buttons");

      warning.style.display = "none";
      btnZone.innerHTML = "";

      if (!team || !pseudo || participants < 1 || participants > 5) return;

      if (code in validPromoCodes) {
        const max = validPromoCodes[code];
        if (participants <= max) {
          btnZone.innerHTML = `<p style="color: green;">‚úÖ Code promo accept√©</p><p>Acc√®s autoris√© sans paiement.</p><a href="acces-reel.html" class="btn">Commencer le jeu</a>`;
        } else {
          warning.innerText = `‚ö† Code limit√© √† ${max} joueur(s). Payer la diff√©rence.`;
          warning.style.display = "block";
          addPayButton(participants);
        }
      } else if (code === "") {
        addPayButton(participants);
      } else {
        warning.innerText = "‚ö† Code promo non reconnu.";
        warning.style.display = "block";
      }

      function addPayButton(p) {
        const url = stripeLinks[p];
        if (url) {
          btnZone.innerHTML = `<a href="${url}" target="_blank" class="btn">‚û° Payer ${p * 5} ‚Ç¨ sur Stripe</a>`;
        }
      }
    });
  </script>
</body>
</html>