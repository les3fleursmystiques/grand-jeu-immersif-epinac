<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription au Grand Jeu Immersif</title>
</head>

<body>
    	<div class="header">
   	 	<img src="images/logo-myssea.png" alt="Logo Myssea">
    	</div>
    	<h1>Inscription au Grand Jeu Immersif Ã  Ã‰pinac</h1>

    <!-- Avertissement Telegram -->
    <div style="background-color: #ffcccb; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
        <strong>âš  IMPORTANT :</strong>
        <p>Pour participer, vous devez avoir un <strong>pseudo Telegram</strong> et avoir contactÃ© notre bot.</p>
        <p>ðŸ“² <a href="https://telegram.org" target="_blank">TÃ©lÃ©chargez Telegram ici</a></p>
        <p>ðŸ’¬ Avant de vous inscrire, cliquez ici et envoyez "/start" Ã  notre bot :
            <a href="https://t.me/EpinacetsonGrandJeu_bot" target="_blank">@EpinacetsonGrandJeu_bot</a></p>
        <p>ðŸ”¹ <a href="https://faq-telegram.com/creer-pseudo-telegram" target="_blank">CrÃ©er un pseudo Telegram</a></p>
    </div>

    <form id="registration-form">
        <label for="team-name">Nom de l'Ã©quipe :</label><br>
        <input type="text" id="team-name" name="team_name" required><br><br>

        <label for="telegram-username">Nom d'utilisateur Telegram :</label><br>
        <input type="text" id="telegram-username" name="telegram_username" required placeholder="Ex: @monpseudo"><br><br>
        <p style="color: red;"><strong>âš  Entrez correctement votre identifiant Telegram (ex: @votrePseudo).</strong></p>

        <label for="participants">Nombre de participants :</label><br>
        <input type="number" id="participants" name="participants" min="1" required><br><br>

        <!-- Code promo -->
        <label for="promo-code">Code promo (facultatif) :</label><br>
        <input type="text" id="promo-code" name="promo_code" placeholder="Ex: TEST2025"><br><br>

        <!-- Bouton de paiement -->
        <button type="button" id="pay-btn" disabled style="background-color: grey; cursor: not-allowed;">
            â›” Inscription temporairement fermÃ©e â›”
        </button>
    </form>

    <!-- Script intÃ©grÃ© -->
    <script>
        const validPromoCodes = ["TEST2025", "GRATUIT", "EPINAC2025"];

        document.addEventListener("DOMContentLoaded", function () {
            const telegramInput = document.getElementById("telegram-username");
            const teamInput = document.getElementById("team-name");
            const participantsInput = document.getElementById("participants");
            const promoInput = document.getElementById("promo-code");
            const payBtn = document.getElementById("pay-btn");

            // Ajouter @ si oubliÃ©
            telegramInput.addEventListener("blur", function () {
                if (!telegramInput.value.startsWith("@")) {
                    telegramInput.value = "@" + telegramInput.value;
                }
            });

            // Activer bouton si tous les champs sont remplis + code promo valide
            document.getElementById("registration-form").addEventListener("input", function () {
                const isFilled = telegramInput.value && teamInput.value && participantsInput.value;
                const promoCode = promoInput.value.trim().toUpperCase();

                if (isFilled && validPromoCodes.includes(promoCode)) {
                    payBtn.innerHTML = "âœ… Code promo acceptÃ© â€” Jouez gratuitement";
                    payBtn.disabled = false;
                    payBtn.style.backgroundColor = "#4CAF50";
                    payBtn.style.cursor = "pointer";
                } else {
                    payBtn.innerHTML = "â›” Inscription temporairement fermÃ©e â›”";
                    payBtn.disabled = true;
                    payBtn.style.backgroundColor = "grey";
                    payBtn.style.cursor = "not-allowed";
                }
            });
        });
    </script>
</body>
</html>